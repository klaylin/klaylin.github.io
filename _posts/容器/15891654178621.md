# VMware基本概述
VMware是桌面到数据中心虚拟化解决方案的厂商，利用基于软件定义的计算、存储和网络虚拟化或采用超融合基础架构体系构建的现代基础架构。常见的虚拟化架构有工作站模式以及裸机模式。利用VMware可以实现热迁移，HA，灾难恢复等功能。
#VMware虚拟机文件说明
VMware 虚拟机的文件主要包括 .nvram 文件，.vmx 文件，vmdk 文件，.vswp 文件，.vmss 文件，.vmsd 文件，.vmsn 文件，.log 文件，.vmxf 文件。与迁移相关的最主要的是 .vmx 文件和 .vmdk 文件

#虚拟化架构模式
##工作站模式
依存于宿主操作系统之上的Application，需要操作系统的支持。Windows版本的软件是Workstations，Mac版的为VMware Fusion。
###Workstation安装虚拟机
###连接远程服务器
###对虚拟机的管理
####快照
快照是一个强大的功能，能够帮助你在操作失误时恢复到之前的状态
#####拍摄快照
选中虚拟机，右键，点击“快照”->“拍摄快照”，之后填写快照的名称以及对快照的描述
#####恢复快照
选中虚拟机，右键，点击“快照”->“恢复快照”，选择需要恢复的快照即可。也可点击“快照管理器”查看所有快照以及快照之间的联系
####克隆
如果需要相同系统的虚拟机，可以使用克隆功能而不用重新安装。
！克隆之后记得修改IP，避免冲突
#####克隆虚拟机
选中虚拟机，右键，点击“管理”->“克隆”，选择克隆当前状态或者是某一快照的状态。
选择克隆类型，链接克隆必须满足源虚拟机处于可用状态，完整克隆之后则不受源虚拟机的影响，如果空间足够，推荐使用完整克隆
####VNC
Virtual Network Console是远程控制软件，运行于VMware Workstation的虚拟机可以方便打开VNC功能。具体可以参阅“飞锡内网管理Knowledge”的相关章节：使用域名或公网连接内网服务--使用公网连接VMware workstations上的虚拟机
##裸机模式
ESXi 独立安装和运行在祼机上的系统，不再依存于宿主操作系统之上。可以直接访问硬件资源，无需通过操作系统来实现硬件访问，效率更高。

###ESXi管理页面说明
ESXi有软件客户端与网页客户端两种模式，本章节以ESXi 6.7网页客户端进行说明
####概览
客户端导航器主要分为主机，虚拟机，存储，网络4大板块，主机板块可以看到服务器型号，内存，存储等整体信息
![客户端主页概览](media/15891654178621/%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%BB%E9%A1%B5%E6%A6%82%E8%A7%88.png)
其他信息请点击不同板块标题进行查看
###上传本地文件到datastore
登录ESXi客户端之后，可以将本地文件上传到datastore中
点击“存储”->“数据存储浏览器”
![datastore1](media/15891654178621/datastore1.png)
点击“上载”，就会打开本地的文件目录，就可以选择文件上传到现有的datastore的目录
![datastore2](media/15891654178621/datastore2.png)

###ESXi创建虚拟机
#VMware与HA-AP
##Mirror LUN & datastore挂载
VMware ESXi有自己的文件系统VMFS，一般存储设备会格式化为VMFS文件系统使用
###格式化之后
主分区信息会变成VMFS
###未格式化
没有分区信息
###问题
在环境更改时，如更换ESXi版本，引擎更换FW，经过引擎变成存储直连服务器等情况，VMFS有时会在环境更改之后没有自动挂载
####方法1
点击“添加存储器”
选择磁盘
选择设备
选择保留签名
完成
####方法2
假如此方法没用，可以开启ESXi主机的ssh功能，使用CLI命令进行挂载
#####命令
esxcfg-volume -l 可以列出为挂载的datastore，此时可以查看到datastore名称及是否可挂载
#VMware SRM FT HA DRS
##SRM


